<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>String연습</title>
		<link href="../css/public.css" rel="stylesheet">
		
		<script>
			
			function proc1() {
				// 입력 prompt
				tmp = prompt("주민번호를 입력하세요.");
				// 각 자릿수 지정해서 문자열 추출
				// 110326-4432618
				// 생일 
				year = tmp.slice(0, 2); //년도
				month = tmp.slice(2, 4); //월
				day = tmp.slice(4, 6); //일
				//성별 index 7 
				gender = tmp.charAt(7);

				// 비교 1900 / 2000 성별 비교
				if(gender == "1" || gender == "2"){
					year = "19" + year;
				}else if(gender == "3" || gender == "4"){
					year = "20" + year; // "2011"
				}
				
				today = new Date();
				age = today.getFullYear() - parseInt(year);
				
				// 출력 내용 작성 
				 
				res = "생일 : " + year +"년 " + month + "월 " + day +"일 <br>";
				if(gender == 1 || gender == 3){
					res += "성별 : 남자 ";
				}else if(gender == 2 || gender == 4){
					res += "성별 : 여자 ";
				}
				res += "나이 : " + age + "<br>";
				
				// 출력
				document.querySelector('#result1').innerHTML = res;
			}
			
			function proc2() {
				// 곱하는 값 문자열
				str="234567892345";
				//ABCDEF-GHIJKLM
				//1234567
				sum = 0;
				// 주민번호 입력 - prompt
				// charAt(i), sub
				temp = prompt("주민번호를 입력하세요.");
				temp2 = temp.split("-")[0] + temp.split("-")[1];
				//
				for(i=0; i <str.length; i++){
					// str의 한자리와 주민번호 한자리씩 추출
					sum += str[i] * temp2[i];
					// 곱하기하고 총합
				}
				
				// a = 11 - (sum 를 11로 나눈 나머지 )
				a = 11 - (sum%11);
				// a 비교 10 -> a = 0 / 11 -> a = 1
				if(a == 10){
					a = 0;
				}else if(a == 11){
					a = 1;
				}
				// 최종 a값과 주민번호 마지막 자리가 같은지 비교
				if(a == temp.charAt(13)){
					res = "유효한 주민번호 입니다.";
				}else{
					res = "유효하지 않은 주민번호 입니다.";
				}
				
				document.querySelector('#result2').innerHTML = res;
				
			}
		</script>
	</head>
	<body>
		
		<div class="box">
			<h3>타이틀</h3>
			주민등록번호를 입력 받아 생년월일과 성별을 출력하는 프로그램을 작성하시오.<br>
			입력은 prompt로 입력받는다.<br>
			예) 주민등록번호를 110326-4432618로 입력 받은 경우<br>
			생일 : 2011년 3월 26일<br>
			성별 : 여자  나이: 10<br>
			<input type="button" value="확인" onclick="proc1()">
			<div id="result1"></div>
		</div>
		
		
		<div class="box">
			<h3>타이틀</h3>
			주민등록번호를 입력 받아 주민등록번호의 유효성을 검사하는 프로그램을 작성하시오.<br>
			(ABCDEF-GHIJKLM)<br>
			1. A*2 + B*3 + ... + H*9 + I*2 + ... + L*5 의 총합을 구한다.<br>
			2. 1번의 합을 11로 나눈 나머지를 구한다.<br>
			3. 11에서 2번의 결과를 뺀다.<br>
			4. 3번의 결과가 0~9이면 값 그대로, 10이면 0, 11이면 1로 변환<br>
			5. 4번의 결과와 M자리의 값이 같으면 맞는 번호이다.<br>
			<input type="button" value="확인" onclick="proc2()">
			<div id="result2"></div>
		</div>
	</body>
</html>